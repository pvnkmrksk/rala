<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Complete index of all English words in Rala dictionary">
    <title>Index / Glossary - Rala</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.svg" type="image/svg+xml">
    
    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Rala">
    <link rel="apple-touch-icon" href="icon.svg">
    <link rel="stylesheet" href="styles.css">
    <style>
        .glossary-container {
            padding: 20px;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        .glossary-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .glossary-search {
            margin-bottom: 30px;
        }
        
        .glossary-search input {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            display: block;
            padding: 12px 16px;
            font-size: 18px;
            border: 1px solid var(--input-border);
            border-radius: 8px;
            background: var(--input-bg);
            color: var(--text-color);
        }
        
        .glossary-stats {
            text-align: center;
            color: var(--text-color-light);
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .glossary-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 8px;
            max-width: 100%;
        }
        
        .glossary-word {
            padding: 8px 12px;
            background: var(--section-bg);
            border: 1px solid var(--border-color-light);
            border-radius: 4px;
            text-decoration: none;
            color: var(--text-color);
            transition: all 0.2s;
            font-size: 14px;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .glossary-word:hover {
            background: var(--hover-bg);
            border-color: var(--text-color);
        }
        
        .glossary-loading {
            text-align: center;
            padding: 40px;
            color: var(--text-color-light);
        }
        
        @media (max-width: 768px) {
            .glossary-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 6px;
            }
            
            .glossary-word {
                font-size: 13px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Hamburger Menu Button -->
    <button class="hamburger-menu" id="hamburger-menu" title="Open menu" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>ರಲ</h2>
            <button class="sidebar-close" id="sidebar-close" aria-label="Close menu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <nav class="sidebar-nav">
            <a href="index.html" class="sidebar-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span>Home</span>
            </a>
            <a href="about.html" class="sidebar-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <span>About</span>
            </a>
            <a href="index.html" class="sidebar-link" id="install-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                <span>Install App</span>
            </a>
            <a href="glossary.html" class="sidebar-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    <line x1="9" y1="7" x2="15" y2="7"></line>
                    <line x1="9" y1="11" x2="15" y2="11"></line>
                    <line x1="9" y1="15" x2="13" y2="15"></line>
                </svg>
                <span>Index / Glossary</span>
            </a>
        </nav>
    </div>
    
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    
    <button class="dark-mode-toggle" id="dark-mode-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">
        <svg id="dark-mode-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
    </button>
    
    <div class="header">
        <h1>ರಲ</h1>
        <p class="subtitle">
            <span class="subtitle-line">Index / Glossary</span>
            <span class="subtitle-line">Complete list of all English words</span>
        </p>
    </div>
    
    <div class="glossary-container">
        <div class="glossary-header">
            <div class="glossary-search">
                <input type="text" id="glossary-search" placeholder="Search words..." autofocus>
            </div>
            <div class="glossary-stats" id="glossary-stats">Loading...</div>
        </div>
        
        <div class="glossary-loading" id="glossary-loading">Loading words...</div>
        <div class="glossary-list" id="glossary-list"></div>
    </div>
    
    <footer class="attribution">
        <div class="footer-nav">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="index.html" id="footer-install-link">Install App</a>
            <a href="glossary.html">Index / Glossary</a>
        </div>
        <div class="footer-links">
            <a href="https://github.com/pvnkmrksk/rala" target="_blank"><strong>Rala (ರಲ)</strong></a>
            <a href="https://alar.ink">Alar</a>
            <a href="https://padakanaja.karnataka.gov.in">Padakanaja</a>
        </div>
        <div style="margin-top: 20px; font-size: 12px; color: var(--text-color-lighter);">
            Made with ❤️ by <a href="https://github.com/pvnkmrksk" target="_blank" style="color: var(--text-color); text-decoration: underline;">pvnkmrksk</a>
        </div>
    </footer>
    
    <script src="js/config.js?v=2.10"></script>
    <script src="js/utils.js?v=2.10"></script>
    <script src="js/sidebar.js?v=2.10"></script>
    <script src="js/dictionary.js?v=2.10"></script>
    <script>
        initDarkMode();
        initSidebar();
        
        // Load and display glossary
        async function loadGlossary() {
            const loadingEl = document.getElementById('glossary-loading');
            const listEl = document.getElementById('glossary-list');
            const statsEl = document.getElementById('glossary-stats');
            const searchInput = document.getElementById('glossary-search');
            
            try {
                // Load Alar dictionary to get all English words
                await loadAlarFromYAML();
                
                // Build reverse index to get all English words
                buildReverseIndex();
                
                // Get all English words from reverse index
                const allWords = Array.from(allEnglishWords).sort();
                
                statsEl.textContent = `${allWords.length.toLocaleString()} English words`;
                loadingEl.style.display = 'none';
                
                // Display words
                function displayWords(words) {
                    listEl.innerHTML = '';
                    words.forEach(word => {
                        const link = document.createElement('a');
                        link.href = `index.html?q=${encodeURIComponent(word)}`;
                        link.className = 'glossary-word';
                        link.textContent = word;
                        listEl.appendChild(link);
                    });
                    
                    statsEl.textContent = `${words.length.toLocaleString()} of ${allWords.length.toLocaleString()} words`;
                }
                
                // Initial display
                displayWords(allWords);
                
                // Search functionality
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase().trim();
                    if (!query) {
                        displayWords(allWords);
                        return;
                    }
                    
                    const filtered = allWords.filter(word => 
                        word.toLowerCase().includes(query)
                    );
                    displayWords(filtered);
                });
                
            } catch (error) {
                console.error('Error loading glossary:', error);
                loadingEl.textContent = 'Error loading words. Please refresh the page.';
            }
        }
        
        loadGlossary();
    </script>
</body>
</html>

